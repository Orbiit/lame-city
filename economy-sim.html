<!DOCTYPE html>
<html>
  <head>
    <title>Economy Simulator - Lame City</title>
    <meta charset="UTF-8">
    <meta name="description" content="monetary unit exchanges; testing a system for the actual game"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <style></style>
  </head>
  <body>
    <p>you have <strong id="mudisplay"></strong> monetary unit(s). you earn <strong id="rate"></strong> MU / min</p>
    <h2>shop</h2>
    <dl>
      <dt>haus simple - 100 MU <button class="purchase" data-buys="simpleHouse" data-price="100" data-earn="10">purchase</button></dt>
      <dd>good starter house - is taxed 10 MU / min</dd>
      <dt>domus kompleks - 500 MU <button class="purchase" data-buys="complexHouse" data-price="500" data-earn="30">purchase</button></dt>
      <dd>fits some more people - is taxed 30 MU / min</dd>
    </dl>
    <h2>ur city</h2>
    <ul id="inv"></ul>

    <script>
const muDisplay = document.querySelector("#mudisplay"),
rateDisplay = document.querySelector("#rate"),
inventoryList = document.querySelector("#inv");
let monetaryUnits = 150,
inventory = {},
muPerMin = 0;
function updateMUDisplay() {
  muDisplay.textContent = monetaryUnits;
  rate.textContent = muPerMin;
}
function updateInventory() {
  let innerHTML = "";
  for (let building in inventory) {
    innerHTML += `<li>${inventory[building]}x ${building}</li>`;
  }
  inventoryList.innerHTML = innerHTML;
}
updateMUDisplay();
updateInventory();
let purchaseBtns = document.getElementsByClassName("purchase");
for (let i = purchaseBtns.length; i--;) {
  let price = +purchaseBtns[i].dataset.price,
  buys = purchaseBtns[i].dataset.buys,
  taxRate = +purchaseBtns[i].dataset.earn;
  purchaseBtns[i].addEventListener("click", e => {
    if (price <= monetaryUnits) {
      inventory[buys] = (inventory[buys] || 0) + 1;
      monetaryUnits -= price;
      muPerMin += taxRate;
      updateMUDisplay();
      updateInventory();
    } else {
      alert("u need " + (price - monetaryUnits) + " more MU to purchase");
    }
  }, false);
}
let lastTime = Date.now();
console.log(setInterval(() => {
  let now = Date.now(),
  wouldEarn = muPerMin * (now - lastTime) / 60000;
  if (wouldEarn >= 1) {
    monetaryUnits += Math.floor(wouldEarn);
    updateMUDisplay();
    updateInventory();
    lastTime = now - (wouldEarn % 1) * 60000 / muPerMin;
  }
}, 1000));
    </script>
  </body>
  <!-- MADE BY SEAN -->
</html>
